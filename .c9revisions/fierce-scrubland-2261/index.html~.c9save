{"ts":1360482899769,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<script src=\"/socket.io/socket.io.js\"></script>\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js\"></script>\n\n<script>\n\nvar socket = io.connect(window.location.hostname);\nvar number =0;\n// on connection to server, ask for user's name with an anonymous callback\nsocket.on('connect', function(){\n   // call the server-side function 'adduser' and send one parameter (value of prompt)\n   socket.emit('adduser', prompt(\"What's your name?\"));\n});\n\n// listener, whenever the server emits 'updatechat', this updates the chat body\nsocket.on('updatechat', function (username, data) {\n   $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');\n\n});\n\n\n// listener, whenever the server emits 'updateusers', this updates the username list\n\nsocket.on('updateusers', function(data) {\n\n   $('#users').empty();\n   $.each(data, function(key, value) {\n   $('#users').append('<div>' + key + '</div>');\n\n  });\n\n});\n\nsocket.on('updateForest',function(index, forest){\n\tvar c=document.getElementById(\"myCanvas\");\n\tvar ctx=c.getContext(\"2d\");\n\tctx.clearRect(0,0,c.width,c.height);\n\tctx.font=\"10px Arial\";\n        ctx.strokeText(\"Level - \" forest.level,  10,10);\n\tctx.strokeText(\"Trees -\"+forest.trees ,10,25);\n        ctx.strokeText(\"Wood  -\"+forest.wood ,10,40);\n});\n\nsocket.on('updateTime', function (time) {\n   $('#time').html('<b> Time :</b> ' + time.toString('dddd, MMMM ,yyyy')  + '<br>');\n\n});\n\n\n\n// on load of page\n\n$(function(){\n\n// when the client clicks SEND\n\n$('#datasend').click( function() {\n\n   var message = $('#data').val();\n  $('#data').val('');\n\n  // tell server to execute 'sendchat' and send along one parameter\n//  socket.emit('sendchat', message);\nnumber += 1;\nnumber = number % 10;\n\nsocket.emit('updateForest',number);\n});\n\n\n\n// when the client hits ENTER on their keyboard\n\n$('#data').keypress(function(e) {\n\n   if(e.which == 13) {\n      $(this).blur();\n     $('#datasend').focus().click();\n   }\n});\n\n});\n\n\n\n</script>\n\n\n\n\n<canvas id=\"myCanvas\" width=\"200\" height=\"100\" style=\"border:1px solid #d3d3d3;\">\nYour browser does not support the HTML5 canvas tag.</canvas>\n\n\n\n\n<div style=\"float:;width:100px;border-right:1px solid green;height:50px;padding:10px;overflow:\">\n   <div id=\"time\"></div>\n</div>\n\n<div style=\"float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;\">\n\n<b>USERS</b>\n\n<div id=\"users\"></div>\n\n</div>\n\n<div style=\"float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;\">\n\n<div id=\"conversation\"></div>\n\n<input id=\"data\" style=\"width:200px;\" />\n\n<input type=\"button\" id=\"datasend\" value=\"send\" />\n\n</div>\n"]],"start1":0,"start2":0,"length1":0,"length2":2614}]],"length":2614}
