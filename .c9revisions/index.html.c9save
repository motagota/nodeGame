{"ts":1360476354877,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<script src=\"/socket.io/socket.io.js\"></script>\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js\"></script>\n\n<script>\n\nvar socket = io.connect(window.location.hostname);\nvar number =0;\n// on connection to server, ask for user's name with an anonymous callback\nsocket.on('connect', function(){\n   // call the server-side function 'adduser' and send one parameter (value of prompt)\n   socket.emit('adduser', prompt(\"What's your name?\"));\n});\n\n// listener, whenever the server emits 'updatechat', this updates the chat body\nsocket.on('updatechat', function (username, data) {\n   $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');\n\n});\n\n\n// listener, whenever the server emits 'updateusers', this updates the username list\n\nsocket.on('updateusers', function(data) {\n\n   $('#users').empty();\n   $.each(data, function(key, value) {\n   $('#users').append('<div>' + key + '</div>');\n\n  });\n\n});\n\n\nsocket.on('updateTime', function (time) {\n   $('#time').html('<b> Time :</b> ' + time.toString('dddd, MMMM ,yyyy')  + '<br>');\n\n});\n\n\nsocket.on('refresh',function(number){\nvar c=document.getElementById(\"myCanvas\");\n\tvar ctx=c.getContext(\"2d\");\n\tctx.clearRect(0,0,c.width,c.height);\n    ctx.fillStyle =\"blue\";\n        ctx.fillRect(220,20,19,19);\n\n});\n\nsocket.on('cells',function(cells){\nvar count=10;\nvar numCells=10;\nvar c=document.getElementById(\"myCanvas\");\n\tvar ctx=c.getContext(\"2d\");\n         \nfor(i=0;i<numCells;i++){\nfor(j=0;j<numCells;j++){\n        ctx.fillStyle = \"white\";\n       if (cells[i][j].gotGrass) ctx.fillStyle =\"green\";\n      if(cells[i][j].gotRabbit)  {\n       //         count += 40;\n               ctx.fillStyle = \"red\";\n           //     \tctx.font=\"15px Arial\";\n             //           ctx.strokeText(\"rabbit - \" + cells[i][j].rabbitEnergy,210, 10+count);\n\t       //         ctx.strokeText(\"energy - \" + cells[i][j].energy ,210, 30+count);\n                        //ctx.strokeText(\"Wood  - \" + forest.wood ,10,40);\n \n               }\n        \n        ctx.fillRect((i*20),(j*20),19,19);\n}\n};\n\n});\n\n\n\n\nsocket.on('updateForest',function(index, forest){\n\tvar c=document.getElementById(\"myCanvas\");\n\tvar ctx=c.getContext(\"2d\");\n\n\t//ctx.font=\"10px Arial\";\n        //ctx.strokeText(\"Level - \" + forest.level,10,10);\n\t//ctx.strokeText(\"Trees - \" + forest.trees ,10,25);\n        //ctx.strokeText(\"Wood  - \" + forest.wood ,10,40);\n\n        ctx.fillStyle =\"red\";\n        ctx.fillRect((index*20)+50,60,19,19);\n\n});\n\n\n\n// on load of page\n\n$(function(){\n\n// when the client clicks SEND\n\n$('#datasend').click( function() {\n\n   var message = $('#data').val();\n  $('#data').val('');\n\n  // tell server to execute 'sendchat' and send along one parameter\n//  socket.emit('sendchat', message);\n\n});\n\n\n\n// when the client hits ENTER on their keyboard\n\n$('#data').keypress(function(e) {\n\n   if(e.which == 13) {\n      $(this).blur();\n     $('#datasend').focus().click();\n   }\n});\n\n});\n\n\n\n</script>\n\n\n\n\n<canvas id=\"myCanvas\" width=\"400\" height=\"400\" style=\"border:1px solid #d3d3d3;\">\nYour browser does not support the HTML5 canvas tag.</canvas>\n\n\n\n\n<div style=\"float:;width:100px;border-right:1px solid green;height:50px;padding:10px;overflow:\">\n   <div id=\"time\"></div>\n</div>\n\n<div style=\"float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;\">\n\n<b>USERS</b>\n\n<div id=\"users\"></div>\n\n</div>\n\n<div style=\"float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;\">\n\n<div id=\"conversation\"></div>\n\n<input id=\"data\" style=\"width:200px;\" />\n\n<input type=\"button\" id=\"datasend\" value=\"send\" />\n\n</div>\n"]],"start1":0,"start2":0,"length1":0,"length2":3591}]],"length":3591}
